{
  "type": "component",
  "npmDependencies": [
    "dayjs",
    "react-icons"
  ],
  "fileDependencies": [
    "./box",
    "./button",
    "./flex",
    "./icon",
    "./icon-button",
    "./input",
    "./popover"
  ],
  "id": "date-picker",
  "file": {
    "name": "date-picker.tsx",
    "content": "\"use client\";\n\nimport { createContext } from \"@dreamy-ui/react\";\nimport { useControllableState } from \"@dreamy-ui/react\";\nimport dayjs, { type Dayjs } from \"dayjs\";\nimport { forwardRef, useMemo, useState } from \"react\";\nimport { BiChevronLeft, BiChevronRight } from \"react-icons/bi\";\nimport { LuCalendar } from \"react-icons/lu\";\nimport { createStyleContext } from \"styled-system/jsx\";\nimport { type DatePickerVariantProps, datePicker } from \"styled-system/recipes\";\nimport { Box, type BoxProps } from \"./box\";\nimport { Button, type ButtonProps } from \"./button\";\nimport { Flex, type FlexProps } from \"./flex\";\nimport { Icon } from \"./icon\";\nimport { IconButton, type IconButtonProps } from \"./icon-button\";\nimport {\n    Input as InputComponent,\n    InputGroup,\n    type InputGroupProps,\n    InputRightAddon\n} from \"./input\";\nimport * as Popover from \"./popover\";\n\nconst { withProvider, withContext } = createStyleContext(datePicker);\n\nconst WEEKDAYS = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\ninterface DatePickerContextValue {\n    value: Date | null;\n    setValue: (date: Date | null) => void;\n    viewDate: Dayjs;\n    setViewDate: (date: Dayjs) => void;\n    minDate?: Date;\n    maxDate?: Date;\n    dateFormat: string;\n    placeholder: string;\n    showFooter: boolean;\n    onApply?: () => void;\n    onCancel?: () => void;\n}\n\nconst [DatePickerProvider, useDatePickerContext] = createContext<DatePickerContextValue>({\n    strict: true,\n    name: \"DatePickerContext\"\n});\n\nexport interface DatePickerRootProps\n    extends Omit<BoxProps, \"defaultValue\" | \"onChange\" | \"value\">,\n        DatePickerVariantProps {\n    /**\n     * The selected date value\n     */\n    value?: Date | null;\n    /**\n     * The default selected date value\n     */\n    defaultValue?: Date | null;\n    /**\n     * Callback fired when the date changes\n     */\n    onChange?: (date: Date | null) => void;\n    /**\n     * The function to call when the apply button is clicked\n     */\n    onApply?: () => void;\n    /**\n     * The function to call when the cancel button is clicked\n     */\n    onCancel?: () => void;\n    /**\n     * Format string for displaying the date in the input\n     * @default \"MMM D, YYYY\"\n     */\n    dateFormat?: string;\n    /**\n     * Placeholder text for the input\n     * @default \"Select date\"\n     */\n    placeholder?: string;\n    /**\n     * Minimum selectable date\n     */\n    minDate?: Date;\n    /**\n     * Maximum selectable date\n     */\n    maxDate?: Date;\n    /**\n     * Whether to show the footer with Cancel/Apply buttons\n     * @default false\n     */\n    showFooter?: boolean;\n}\n\nexport const Root = withProvider(\n    forwardRef<HTMLDivElement, DatePickerRootProps>(function DatePickerRoot(props, ref) {\n        const {\n            value: valueProp,\n            defaultValue,\n            onChange,\n            onApply,\n            onCancel,\n            dateFormat = \"MMM D, YYYY\",\n            placeholder = \"Select date\",\n            minDate,\n            maxDate,\n            showFooter = false,\n            children,\n            ...rest\n        } = props;\n\n        const [value, setValue] = useControllableState({\n            value: valueProp,\n            defaultValue: defaultValue ?? null,\n            onChange\n        });\n\n        const [isOpen, setIsOpen] = useState(false);\n        const [viewDate, setViewDate] = useState(() => (value ? dayjs(value) : dayjs()));\n\n        const handleApply = () => {\n            onApply?.();\n            setIsOpen(false);\n        };\n\n        const handleCancel = () => {\n            onCancel?.();\n            setIsOpen(false);\n        };\n\n        return (\n            <DatePickerProvider\n                value={{\n                    value,\n                    setValue: (date) => {\n                        setValue(date);\n                        if (!showFooter && date) {\n                            setIsOpen(false);\n                        }\n                    },\n                    viewDate,\n                    setViewDate,\n                    minDate,\n                    maxDate,\n                    dateFormat,\n                    placeholder,\n                    showFooter,\n                    onApply: handleApply,\n                    onCancel: handleCancel\n                }}\n            >\n                <Popover.Root\n                    isOpen={isOpen}\n                    onClose={() => setIsOpen(false)}\n                    onOpen={() => setIsOpen(true)}\n                >\n                    <Box\n                        ref={ref}\n                        {...rest}\n                    >\n                        {children}\n                    </Box>\n                </Popover.Root>\n            </DatePickerProvider>\n        );\n    }),\n    \"root\"\n);\n\nexport interface DatePickerTriggerProps extends ButtonProps {}\n\nexport const Trigger = withContext(\n    forwardRef<HTMLButtonElement, DatePickerTriggerProps>(function DatePickerTrigger(props, ref) {\n        return (\n            <Popover.Trigger>\n                <Button\n                    ref={ref}\n                    variant=\"outline\"\n                    {...props}\n                />\n            </Popover.Trigger>\n        );\n    }),\n    \"trigger\"\n);\n\nexport interface DatePickerInputProps extends InputGroupProps {}\n\nexport const Input = withContext(\n    forwardRef<HTMLDivElement, DatePickerInputProps>(function DatePickerInput(props, ref) {\n        const context = useDatePickerContext();\n        const formattedDate = context.value ? dayjs(context.value).format(context.dateFormat) : \"\";\n\n        return (\n            <Popover.Trigger>\n                <InputGroup ref={ref}>\n                    <InputComponent\n                        placeholder={context.placeholder}\n                        readOnly\n                        value={formattedDate}\n                        {...props}\n                    />\n                    <InputRightAddon>\n                        <LuCalendar />\n                    </InputRightAddon>\n                </InputGroup>\n            </Popover.Trigger>\n        );\n    }),\n    \"trigger\"\n);\n\nexport interface DatePickerPopoverProps extends Popover.PopoverContentProps {}\n\nexport const PopoverContent = withContext(\n    forwardRef<HTMLElement, DatePickerPopoverProps>(function DatePickerPopover(props, ref) {\n        const { transition: _, ...restProps } = props;\n        return (\n            <Popover.Content\n                ref={ref}\n                {...restProps}\n            />\n        );\n    }),\n    \"popover\"\n);\n\nexport interface DatePickerCalendarProps extends BoxProps {}\n\nexport const Calendar = withContext(\n    forwardRef<HTMLDivElement, DatePickerCalendarProps>(function DatePickerCalendar(props, ref) {\n        const context = useDatePickerContext();\n        const { value, setValue, viewDate, setViewDate, minDate, maxDate } = context;\n\n        const selectedDate = value ? dayjs(value) : null;\n\n        const calendarDays = useMemo(() => {\n            const startOfMonth = viewDate.startOf(\"month\");\n            const endOfMonth = viewDate.endOf(\"month\");\n            const startOfCalendar = startOfMonth.startOf(\"week\");\n            const endOfCalendar = endOfMonth.endOf(\"week\");\n\n            const days: Dayjs[] = [];\n            let current = startOfCalendar;\n\n            while (current.isBefore(endOfCalendar) || current.isSame(endOfCalendar, \"day\")) {\n                days.push(current);\n                current = current.add(1, \"day\");\n            }\n\n            return days;\n        }, [viewDate]);\n\n        const handlePreviousMonth = () => {\n            setViewDate(viewDate.subtract(1, \"month\"));\n        };\n\n        const handleNextMonth = () => {\n            setViewDate(viewDate.add(1, \"month\"));\n        };\n\n        const handleDateClick = (date: Dayjs) => {\n            if (minDate && date.isBefore(dayjs(minDate), \"day\")) return;\n            if (maxDate && date.isAfter(dayjs(maxDate), \"day\")) return;\n            setValue(date.toDate());\n        };\n\n        const isToday = (date: Dayjs) => date.isSame(dayjs(), \"day\");\n        const isSelected = (date: Dayjs) => selectedDate?.isSame(date, \"day\");\n        const isOutsideMonth = (date: Dayjs) => !date.isSame(viewDate, \"month\");\n        const isDisabled = (date: Dayjs) => {\n            if (minDate && date.isBefore(dayjs(minDate), \"day\")) return true;\n            if (maxDate && date.isAfter(dayjs(maxDate), \"day\")) return true;\n            return false;\n        };\n\n        return (\n            <Box\n                ref={ref}\n                {...props}\n            >\n                <CalendarHeader>\n                    <CalendarNav>\n                        <CalendarNavButton\n                            aria-label=\"Previous month\"\n                            onClick={handlePreviousMonth}\n                            type=\"button\"\n                        >\n                            <Icon as={BiChevronLeft} />\n                        </CalendarNavButton>\n                        <CalendarTitle>{viewDate.format(\"MMMM YYYY\")}</CalendarTitle>\n                        <CalendarNavButton\n                            aria-label=\"Next month\"\n                            onClick={handleNextMonth}\n                            type=\"button\"\n                        >\n                            <Icon as={BiChevronRight} />\n                        </CalendarNavButton>\n                    </CalendarNav>\n                </CalendarHeader>\n                <CalendarGrid>\n                    <CalendarGridHeader>\n                        {WEEKDAYS.map((day) => (\n                            <CalendarGridHeaderCell key={day}>{day}</CalendarGridHeaderCell>\n                        ))}\n                    </CalendarGridHeader>\n                    <CalendarGridBody>\n                        {calendarDays.map((date) => (\n                            <CalendarCell\n                                key={`${date.format(\"YYYY-MM-DD\")}-${viewDate.format(\"MM\")}`}\n                            >\n                                <CalendarCellButton\n                                    data-outside-month={isOutsideMonth(date) ? \"\" : undefined}\n                                    data-selected={isSelected(date) ? \"\" : undefined}\n                                    data-today={isToday(date) ? \"\" : undefined}\n                                    disabled={isDisabled(date)}\n                                    onClick={() => handleDateClick(date)}\n                                    type=\"button\"\n                                >\n                                    {date.format(\"D\")}\n                                </CalendarCellButton>\n                            </CalendarCell>\n                        ))}\n                    </CalendarGridBody>\n                </CalendarGrid>\n            </Box>\n        );\n    }),\n    \"calendar\"\n);\n\nexport interface DatePickerCalendarHeaderProps extends FlexProps {}\n\nexport const CalendarHeader = withContext(\n    forwardRef<HTMLDivElement, DatePickerCalendarHeaderProps>(\n        function DatePickerCalendarHeader(props, ref) {\n            return (\n                <Flex\n                    ref={ref}\n                    {...props}\n                />\n            );\n        }\n    ),\n    \"calendarHeader\"\n);\n\nexport interface DatePickerCalendarTitleProps extends BoxProps {}\n\nexport const CalendarTitle = withContext(\n    forwardRef<HTMLDivElement, DatePickerCalendarTitleProps>(\n        function DatePickerCalendarTitle(props, ref) {\n            return (\n                <Box\n                    ref={ref}\n                    {...props}\n                />\n            );\n        }\n    ),\n    \"calendarTitle\"\n);\n\nexport interface DatePickerCalendarNavProps extends FlexProps {}\n\nexport const CalendarNav = withContext(\n    forwardRef<HTMLDivElement, DatePickerCalendarNavProps>(\n        function DatePickerCalendarNav(props, ref) {\n            return (\n                <Flex\n                    ref={ref}\n                    {...props}\n                />\n            );\n        }\n    ),\n    \"calendarNav\"\n);\n\nexport interface DatePickerCalendarNavButtonProps extends IconButtonProps {}\n\nexport const CalendarNavButton = withContext(\n    forwardRef<HTMLButtonElement, DatePickerCalendarNavButtonProps>(\n        function DatePickerCalendarNavButton(props, ref) {\n            return (\n                <IconButton\n                    ref={ref}\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    {...props}\n                />\n            );\n        }\n    ),\n    \"calendarNavButton\"\n);\n\nexport interface DatePickerCalendarGridProps extends BoxProps {}\n\nexport const CalendarGrid = withContext(\n    forwardRef<HTMLDivElement, DatePickerCalendarGridProps>(\n        function DatePickerCalendarGrid(props, ref) {\n            return (\n                <Box\n                    ref={ref}\n                    {...props}\n                />\n            );\n        }\n    ),\n    \"calendarGrid\"\n);\n\nexport interface DatePickerCalendarGridHeaderProps extends BoxProps {}\n\nexport const CalendarGridHeader = withContext(\n    forwardRef<HTMLDivElement, DatePickerCalendarGridHeaderProps>(\n        function DatePickerCalendarGridHeader(props, ref) {\n            return (\n                <Box\n                    ref={ref}\n                    {...props}\n                />\n            );\n        }\n    ),\n    \"calendarGridHeader\"\n);\n\nexport interface DatePickerCalendarGridHeaderCellProps extends BoxProps {}\n\nexport const CalendarGridHeaderCell = withContext(\n    forwardRef<HTMLDivElement, DatePickerCalendarGridHeaderCellProps>(\n        function DatePickerCalendarGridHeaderCell(props, ref) {\n            return (\n                <Box\n                    ref={ref}\n                    {...props}\n                />\n            );\n        }\n    ),\n    \"calendarGridHeaderCell\"\n);\n\nexport interface DatePickerCalendarGridBodyProps extends BoxProps {}\n\nexport const CalendarGridBody = withContext(\n    forwardRef<HTMLDivElement, DatePickerCalendarGridBodyProps>(\n        function DatePickerCalendarGridBody(props, ref) {\n            return (\n                <Box\n                    ref={ref}\n                    {...props}\n                />\n            );\n        }\n    ),\n    \"calendarGridBody\"\n);\n\nexport interface DatePickerCalendarCellProps extends BoxProps {}\n\nexport const CalendarCell = withContext(\n    forwardRef<HTMLDivElement, DatePickerCalendarCellProps>(\n        function DatePickerCalendarCell(props, ref) {\n            return (\n                <Box\n                    ref={ref}\n                    {...props}\n                />\n            );\n        }\n    ),\n    \"calendarCell\"\n);\n\nexport interface DatePickerCalendarCellButtonProps extends ButtonProps {}\n\nexport const CalendarCellButton = withContext(\n    forwardRef<HTMLButtonElement, DatePickerCalendarCellButtonProps>(\n        function DatePickerCalendarCellButton(props, ref) {\n            return (\n                <Button\n                    ref={ref}\n                    size=\"md\"\n                    variant=\"ghost\"\n                    {...props}\n                />\n            );\n        }\n    ),\n    \"calendarCellButton\"\n);\n\nexport interface DatePickerFooterProps extends FlexProps {}\n\nexport const Footer = withContext(\n    forwardRef<HTMLDivElement, DatePickerFooterProps>(function DatePickerFooter(props, ref) {\n        const context = useDatePickerContext();\n\n        if (!context.showFooter) {\n            return null;\n        }\n\n        return (\n            <Flex\n                ref={ref}\n                {...props}\n            >\n                <FooterButton\n                    onClick={context.onCancel}\n                    variant=\"outline\"\n                >\n                    Cancel\n                </FooterButton>\n                <FooterButton\n                    onClick={context.onApply}\n                    variant=\"solid\"\n                >\n                    Apply\n                </FooterButton>\n            </Flex>\n        );\n    }),\n    \"footer\"\n);\n\nexport interface DatePickerFooterButtonProps extends ButtonProps {}\n\nexport const FooterButton = withContext(\n    forwardRef<HTMLButtonElement, DatePickerFooterButtonProps>(\n        function DatePickerFooterButton(props, ref) {\n            return (\n                <Button\n                    ref={ref}\n                    {...props}\n                />\n            );\n        }\n    ),\n    \"footerButton\"\n);\n"
  },
  "component": "DatePicker",
  "hasRecipe": true,
  "hasPattern": false,
  "recipeIds": [
    "date-picker"
  ]
}