{
  "type": "component",
  "fileDependencies": [
    "./motion"
  ],
  "id": "transitions",
  "file": {
    "name": "transitions.tsx",
    "content": "import {\n    TRANSITION_DEFAULTS,\n    type Variants,\n    type WithTransitionConfig,\n    useMotionVariants\n} from \"@dreamy-ui/react\";\nimport {\n    AnimatePresence,\n    type AnimatePresenceProps,\n    type HTMLMotionProps,\n    type Variants as _Variants\n} from \"motion/react\";\nimport { forwardRef, useMemo } from \"react\";\nimport { css, cx } from \"styled-system/css\";\nimport { MotionBox, type MotionBoxProps } from \"./motion\";\n\nexport interface CollapseOptions {\n    /**\n     * If `true`, the opacity of the content will be animated\n     * @default true\n     */\n    animateOpacity?: boolean;\n    /**\n     * The height you want the content in its collapsed state.\n     * @default 0\n     */\n    startingHeight?: number | string;\n    /**\n     * The height you want the content in its expanded state.\n     * @default \"auto\"\n     */\n    endingHeight?: number | string;\n    /**\n     * Props to pass to the AnimatePresence component\n     */\n    animatePresenceProps?: AnimatePresenceProps;\n}\n\nexport type ICollapse = CollapseProps;\n\nexport interface CollapseProps extends WithTransitionConfig<MotionBoxProps>, CollapseOptions {}\n\n/**\n * Collapse component.\n *\n * @See Docs https://dreamy-ui.com/docs/components/transitions\n */\nexport const Collapse = forwardRef<HTMLDivElement, CollapseProps>((props, ref) => {\n    const {\n        in: isOpen,\n        unmountOnExit,\n        animateOpacity = true,\n        startingHeight = 0,\n        endingHeight = \"auto\",\n        style,\n        className,\n        transition,\n        transitionEnd,\n        animatePresenceProps,\n        ...rest\n    } = props;\n\n    const custom = useMemo(\n        () => ({\n            startingHeight,\n            endingHeight,\n            animateOpacity,\n            transition,\n            transitionEnd: {\n                enter: transitionEnd?.enter,\n                exit: unmountOnExit ? transitionEnd?.exit : transitionEnd?.exit\n            }\n        }),\n        [startingHeight, endingHeight, animateOpacity, transition, transitionEnd, unmountOnExit]\n    );\n\n    const {\n        collapse: { default: variants }\n    } = useMotionVariants();\n\n    const show = useMemo(() => (unmountOnExit ? isOpen : true), [unmountOnExit, isOpen]);\n    const animate = useMemo(\n        () => (isOpen || unmountOnExit ? \"initial\" : \"exit\"),\n        [isOpen, unmountOnExit]\n    );\n\n    return (\n        <AnimatePresence\n            initial={false}\n            custom={custom}\n            {...animatePresenceProps}\n        >\n            {show && (\n                <MotionBox\n                    ref={ref}\n                    custom={custom}\n                    variants={variants as _Variants}\n                    initial={unmountOnExit ? \"exit\" : false}\n                    animate={animate}\n                    exit=\"exit\"\n                    {...rest}\n                    className={cx(\n                        css({\n                            overflow: \"hidden\",\n                            display: \"block\"\n                        }),\n                        className\n                    )}\n                />\n            )}\n        </AnimatePresence>\n    );\n});\n\nCollapse.displayName = \"Collapse\";\n\ninterface ScaleOptions {\n    /**\n     * The initial scale of the element\n     * @default 0.95\n     */\n    initialScale?: number;\n    /**\n     * If `true`, the element will transition back to exit state\n     * @default true\n     */\n    reverse?: boolean;\n    /**\n     * Props to pass to the AnimatePresence component\n     */\n    animatePresenceProps?: AnimatePresenceProps;\n}\n\nconst variants: Variants<ScaleOptions> = {\n    exit: ({ reverse, initialScale, transition, transitionEnd }) => ({\n        opacity: 0,\n        ...(reverse\n            ? { scale: initialScale, transitionEnd: transitionEnd?.exit }\n            : { transitionEnd: { scale: initialScale, ...transitionEnd?.exit } }),\n        transition: transition?.exit ?? TRANSITION_DEFAULTS.exit\n    }),\n    enter: ({ transitionEnd, transition }) => ({\n        opacity: 1,\n        scale: 1,\n        transition: transition?.enter ?? TRANSITION_DEFAULTS.enter,\n        transitionEnd: transitionEnd?.enter\n    })\n};\n\nexport const ScaleConfig: HTMLMotionProps<\"div\"> = {\n    initial: \"exit\",\n    animate: \"enter\",\n    exit: \"exit\",\n    variants: variants as _Variants\n};\n\nexport interface ScaleProps extends ScaleOptions, WithTransitionConfig<MotionBoxProps> {}\n\nexport const Scale = forwardRef<HTMLDivElement, ScaleProps>(function Scale(props, ref) {\n    const {\n        unmountOnExit,\n        in: isOpen,\n        reverse = true,\n        initialScale = 0.95,\n        transition,\n        transitionEnd,\n        delay,\n        animatePresenceProps,\n        ...rest\n    } = props;\n\n    const show = unmountOnExit ? isOpen && unmountOnExit : true;\n    const animate = isOpen || unmountOnExit ? \"enter\" : \"exit\";\n\n    const custom = { initialScale, reverse, transition, transitionEnd, delay };\n\n    return (\n        <AnimatePresence\n            {...animatePresenceProps}\n            custom={custom}\n        >\n            {show && (\n                <MotionBox\n                    ref={ref}\n                    {...ScaleConfig}\n                    animate={animate}\n                    custom={custom}\n                    {...rest}\n                />\n            )}\n        </AnimatePresence>\n    );\n});\n\nScale.displayName = \"Scale\";\n"
  },
  "component": "Transitions",
  "hasRecipe": false,
  "hasPattern": false
}