{
  "type": "component",
  "npmDependencies": [],
  "fileDependencies": [
    "./box",
    "./kbd",
    "./popover"
  ],
  "id": "menu",
  "file": {
    "name": "menu.tsx",
    "content": "\"use client\";\r\n\r\nimport {\r\n    MenuDescendantsProvider,\r\n    MenuProvider,\r\n    type UseMenuItemProps,\r\n    type UseMenuProps,\r\n    runIfFn,\r\n    useActionKey,\r\n    useMenu,\r\n    useMenuContext,\r\n    useMenuItem\r\n} from \"@dreamy-ui/react\";\r\nimport { Children, type ReactElement, type ReactNode, cloneElement, forwardRef } from \"react\";\r\nimport { type HTMLDreamyProps, createStyleContext, dreamy } from \"styled-system/jsx\";\r\nimport { menu } from \"styled-system/recipes\";\r\nimport { Box } from \"./box\";\r\nimport { Kbd } from \"./kbd\";\r\nimport {\r\n    Content as PopoverContent,\r\n    type PopoverContentProps,\r\n    type PopoverProps,\r\n    Root as PopoverRoot,\r\n    Trigger as PopoverTrigger\r\n} from \"./popover\";\r\n\r\nconst { withProvider, withContext } = createStyleContext(menu);\r\n\r\nexport interface MenuProps extends UseMenuProps<PopoverProps> {\r\n    /**\r\n     * The placement of the menu.\r\n     * @default \"bottom\"\r\n     */\r\n    placement?: PopoverProps[\"placement\"];\r\n    children?: ReactNode;\r\n    className?: string;\r\n}\r\n\r\n/**\r\n * Menu component\r\n *\r\n * @See Docs https://dreamy-ui.com/docs/components/menu\r\n */\r\nexport const Root = withProvider(function MenuRoot({\r\n    children,\r\n    className,\r\n    placement,\r\n    ...props\r\n}: MenuProps) {\r\n    const { rest, ...ctx } = useMenu(props);\r\n\r\n    return (\r\n        <MenuProvider value={ctx}>\r\n            <Box {...ctx.getRootProps({ className })}>\r\n                <PopoverRoot\r\n                    hasArrow={false}\r\n                    initialFocusRef={ctx.triggerRef}\r\n                    isOpen={ctx.isOpen}\r\n                    lazyBehavior=\"keepMounted\"\r\n                    onClose={ctx.onClose}\r\n                    onOpen={ctx.onOpen}\r\n                    placement={placement ?? \"bottom\"}\r\n                    reduceMotion={ctx.reduceMotion}\r\n                    {...props.popoverProps}\r\n                >\r\n                    {children}\r\n                </PopoverRoot>\r\n            </Box>\r\n        </MenuProvider>\r\n    );\r\n}, \"root\");\r\n\r\nexport interface MenuContentProps extends PopoverContentProps {}\r\n\r\nexport const Content = withContext(\r\n    forwardRef<HTMLDivElement, MenuContentProps>(function MenuContent(props, ref) {\r\n        const { children, ...rest } = props;\r\n\r\n        const { getContentProps, descendants } = useMenuContext();\r\n\r\n        return (\r\n            <PopoverContent {...getContentProps(rest, ref)}>\r\n                <MenuDescendantsProvider value={descendants}>{children}</MenuDescendantsProvider>\r\n            </PopoverContent>\r\n        );\r\n    }),\r\n    \"content\"\r\n);\r\n\r\nexport interface MenuButtonProps extends HTMLDreamyProps<\"button\"> {\r\n    /**\r\n     * Icon to display on the left side of the menu item\r\n     */\r\n    icon?: React.ReactNode | (() => React.ReactNode);\r\n    /**\r\n     * Command to display on the right side of the menu item\r\n     */\r\n    command?: string;\r\n    /**\r\n     * The content to display on the right side of the menu item\r\n     */\r\n    rightContent?: React.ReactNode | (() => React.ReactNode);\r\n    /**\r\n     * Children to render in the menu item\r\n     */\r\n    children?: React.ReactNode;\r\n}\r\n\r\nexport const Item = withContext(\r\n    forwardRef<HTMLButtonElement, MenuButtonProps>(function MenuButton(props, ref) {\r\n        const { icon, command, rightContent, children, ...rest } = props;\r\n\r\n        const buttonProps = useMenuItem(rest, ref);\r\n        const actionKey = useActionKey();\r\n\r\n        return (\r\n            <dreamy.button {...buttonProps}>\r\n                <span>\r\n                    {runIfFn(icon)}\r\n                    {children}\r\n                </span>\r\n                {command && <Kbd size={\"sm\"}>{command.replaceAll(\"{actionKey}\", actionKey)}</Kbd>}\r\n                {rightContent && runIfFn(rightContent)}\r\n            </dreamy.button>\r\n        );\r\n    }),\r\n    \"item\"\r\n);\r\n\r\nexport interface MenuTriggerProps extends HTMLDreamyProps<\"button\"> {\r\n    placeholder?: string;\r\n}\r\n\r\nexport const Trigger = forwardRef<HTMLButtonElement, MenuTriggerProps>(function MenuTrigger(\r\n    { children, placeholder, ...rest },\r\n    ref\r\n) {\r\n    const { getTriggerProps } = useMenuContext();\r\n\r\n    const child = Children.only(children) as ReactElement;\r\n    const trigger = cloneElement(child, getTriggerProps(rest, ref));\r\n\r\n    return <PopoverTrigger {...rest}>{trigger}</PopoverTrigger>;\r\n});\r\n"
  },
  "component": "Menu",
  "hasRecipe": true,
  "hasPattern": false,
  "recipeIds": [
    "menu"
  ]
}