{
  "type": "component",
  "npmDependencies": [],
  "fileDependencies": [],
  "id": "file-upload",
  "file": {
    "name": "file-upload.tsx",
    "content": "\"use client\";\r\n\r\nimport {\r\n    FileUploadProvider,\r\n    type UseFileUploadProps,\r\n    type UseFileUploadReturn,\r\n    formatFileSize,\r\n    useFileUpload,\r\n    useFileUploadContext\r\n} from \"@dreamy-ui/react\";\r\nimport { forwardRef, useMemo } from \"react\";\r\nimport { type HTMLDreamyProps, createStyleContext, dreamy } from \"styled-system/jsx\";\r\nimport { fileUpload } from \"styled-system/recipes\";\r\n\r\nconst { withProvider, withContext } = createStyleContext(fileUpload);\r\n\r\n// ─── Root ────────────────────────────────────────────────────────────────────\r\n\r\ninterface RootBaseProps extends UseFileUploadProps {}\r\n\r\nconst StyledRoot = withProvider(dreamy.div, \"root\");\r\n\r\n/**\r\n * FileUpload.Root\r\n *\r\n * The root container for the file upload component.\r\n * Includes the hidden file input automatically.\r\n *\r\n * @See Docs https://dreamy-ui.com/docs/components/file-upload\r\n */\r\nexport const Root = forwardRef<HTMLDivElement, RootBaseProps & HTMLDreamyProps<\"div\">>(\r\n    function FileUploadRoot(props, ref) {\r\n        const {\r\n            accept,\r\n            maxFiles,\r\n            maxFileSize,\r\n            minFileSize,\r\n            allowDrop,\r\n            directory,\r\n            capture,\r\n            disabled,\r\n            required,\r\n            invalid,\r\n            name,\r\n            onFileAccept,\r\n            onFileReject,\r\n            onFileChange,\r\n            validate,\r\n            preventDocumentDrop,\r\n            locale,\r\n            children,\r\n            ...rest\r\n        } = props;\r\n\r\n        const fileUpload = useFileUpload({\r\n            accept,\r\n            maxFiles,\r\n            maxFileSize,\r\n            minFileSize,\r\n            allowDrop,\r\n            directory,\r\n            capture,\r\n            disabled,\r\n            required,\r\n            invalid,\r\n            name,\r\n            onFileAccept,\r\n            onFileReject,\r\n            onFileChange,\r\n            validate,\r\n            preventDocumentDrop,\r\n            locale\r\n        });\r\n\r\n        return (\r\n            <FileUploadProvider value={fileUpload}>\r\n                <StyledRoot\r\n                    ref={ref}\r\n                    {...fileUpload.getRootProps()}\r\n                    {...rest}\r\n                >\r\n                    <input {...fileUpload.getInputProps()} />\r\n                    {children}\r\n                </StyledRoot>\r\n            </FileUploadProvider>\r\n        );\r\n    }\r\n);\r\n\r\n// ─── RootProvider ────────────────────────────────────────────────────────────\r\n\r\ninterface RootProviderProps {\r\n    value: UseFileUploadReturn;\r\n    children?: React.ReactNode;\r\n}\r\n\r\nconst StyledRootProvider = withProvider(dreamy.div, \"root\");\r\n\r\n/**\r\n * FileUpload.RootProvider\r\n *\r\n * Use this when you want to control the file upload externally\r\n * via the useFileUpload hook.\r\n */\r\nexport const RootProvider = forwardRef<HTMLDivElement, RootProviderProps & HTMLDreamyProps<\"div\">>(\r\n    function FileUploadRootProvider(props, ref) {\r\n        const { value, children, ...rest } = props;\r\n\r\n        return (\r\n            <FileUploadProvider value={value}>\r\n                <StyledRootProvider\r\n                    ref={ref}\r\n                    {...value.getRootProps()}\r\n                    {...rest}\r\n                >\r\n                    <input {...value.getInputProps()} />\r\n                    {children}\r\n                </StyledRootProvider>\r\n            </FileUploadProvider>\r\n        );\r\n    }\r\n);\r\n\r\n// ─── Label ───────────────────────────────────────────────────────────────────\r\n\r\nexport const Label = withContext(dreamy.label, \"label\");\r\n\r\n// ─── Dropzone ────────────────────────────────────────────────────────────────\r\n\r\nconst StyledDropzone = withContext(dreamy.div, \"dropzone\");\r\n\r\n/**\r\n * FileUpload.Dropzone\r\n *\r\n * A drag-and-drop area for uploading files.\r\n */\r\nexport const Dropzone = forwardRef<HTMLDivElement, HTMLDreamyProps<\"div\">>(\r\n    function FileUploadDropzone(props, ref) {\r\n        const { children, ...rest } = props;\r\n        const ctx = useFileUploadContext();\r\n\r\n        return (\r\n            <StyledDropzone\r\n                ref={ref}\r\n                {...ctx.getDropzoneProps()}\r\n                {...rest}\r\n            >\r\n                {children}\r\n            </StyledDropzone>\r\n        );\r\n    }\r\n);\r\n\r\n// ─── DropzoneContent ─────────────────────────────────────────────────────────\r\n\r\nexport const DropzoneContent = withContext(dreamy.div, \"dropzoneContent\");\r\n\r\n// ─── Trigger ─────────────────────────────────────────────────────────────────\r\n\r\nconst StyledTrigger = withContext(dreamy.button, \"trigger\");\r\n\r\n/**\r\n * FileUpload.Trigger\r\n *\r\n * A button that opens the file picker dialog.\r\n */\r\nexport const Trigger = forwardRef<HTMLButtonElement, HTMLDreamyProps<\"button\">>(\r\n    function FileUploadTrigger(props, ref) {\r\n        const { children, ...rest } = props;\r\n        const ctx = useFileUploadContext();\r\n\r\n        return (\r\n            <StyledTrigger\r\n                ref={ref}\r\n                {...ctx.getTriggerProps()}\r\n                {...rest}\r\n            >\r\n                {children}\r\n            </StyledTrigger>\r\n        );\r\n    }\r\n);\r\n\r\n// ─── ItemGroup ───────────────────────────────────────────────────────────────\r\n\r\nexport const ItemGroup = withContext(dreamy.ul, \"itemGroup\");\r\n\r\n// ─── Item ────────────────────────────────────────────────────────────────────\r\n\r\ninterface ItemProps {\r\n    file: File;\r\n    children?: React.ReactNode;\r\n}\r\n\r\nconst StyledItem = withContext(dreamy.li, \"item\");\r\n\r\n/**\r\n * FileUpload.Item\r\n *\r\n * Represents a single uploaded file in the list.\r\n */\r\nexport const Item = forwardRef<HTMLLIElement, ItemProps & HTMLDreamyProps<\"li\">>(\r\n    function FileUploadItem(props, ref) {\r\n        const { file, children, ...rest } = props;\r\n\r\n        return (\r\n            <StyledItem\r\n                data-file={file.name}\r\n                ref={ref}\r\n                {...rest}\r\n            >\r\n                {children}\r\n            </StyledItem>\r\n        );\r\n    }\r\n);\r\n\r\n// ─── ItemPreview ─────────────────────────────────────────────────────────────\r\n\r\ninterface ItemPreviewProps {\r\n    file?: File;\r\n    children?: React.ReactNode;\r\n}\r\n\r\nconst StyledItemPreview = withContext(dreamy.div, \"itemPreview\");\r\n\r\n/**\r\n * FileUpload.ItemPreview\r\n *\r\n * Displays a preview icon for the uploaded file.\r\n * If no children are provided, displays a default file icon.\r\n */\r\nexport const ItemPreview = forwardRef<HTMLDivElement, ItemPreviewProps & HTMLDreamyProps<\"div\">>(\r\n    function FileUploadItemPreview(props, ref) {\r\n        const { children, ...rest } = props;\r\n\r\n        return (\r\n            <StyledItemPreview\r\n                ref={ref}\r\n                {...rest}\r\n            >\r\n                {children || <DefaultFileIcon />}\r\n            </StyledItemPreview>\r\n        );\r\n    }\r\n);\r\n\r\n// ─── ItemPreviewImage ────────────────────────────────────────────────────────\r\n\r\ninterface ItemPreviewImageProps {\r\n    file: File;\r\n}\r\n\r\nconst StyledItemPreviewImage = withContext(dreamy.img, \"itemPreviewImage\");\r\n\r\n/**\r\n * FileUpload.ItemPreviewImage\r\n *\r\n * Displays an image preview for image files.\r\n */\r\nexport const ItemPreviewImage = forwardRef<\r\n    HTMLImageElement,\r\n    ItemPreviewImageProps & HTMLDreamyProps<\"img\">\r\n>(function FileUploadItemPreviewImage(props, ref) {\r\n    const { file, ...rest } = props;\r\n    const src = useMemo(() => URL.createObjectURL(file), [file]);\r\n\r\n    return (\r\n        <StyledItemPreviewImage\r\n            alt={file.name}\r\n            ref={ref}\r\n            src={src}\r\n            {...rest}\r\n        />\r\n    );\r\n});\r\n\r\n// ─── ItemContent ─────────────────────────────────────────────────────────────\r\n\r\nexport const ItemContent = withContext(dreamy.div, \"itemContent\");\r\n\r\n// ─── ItemName ────────────────────────────────────────────────────────────────\r\n\r\ninterface ItemNameProps {\r\n    file: File;\r\n    children?: React.ReactNode;\r\n}\r\n\r\nconst StyledItemName = withContext(dreamy.span, \"itemName\");\r\n\r\n/**\r\n * FileUpload.ItemName\r\n *\r\n * Displays the name of the uploaded file.\r\n */\r\nexport const ItemName = forwardRef<HTMLSpanElement, ItemNameProps & HTMLDreamyProps<\"span\">>(\r\n    function FileUploadItemName(props, ref) {\r\n        const { file, children, ...rest } = props;\r\n\r\n        return (\r\n            <StyledItemName\r\n                ref={ref}\r\n                {...rest}\r\n            >\r\n                {children || file.name}\r\n            </StyledItemName>\r\n        );\r\n    }\r\n);\r\n\r\n// ─── ItemSizeText ────────────────────────────────────────────────────────────\r\n\r\ninterface ItemSizeTextProps {\r\n    file: File;\r\n    children?: React.ReactNode;\r\n}\r\n\r\nconst StyledItemSizeText = withContext(dreamy.span, \"itemSizeText\");\r\n\r\n/**\r\n * FileUpload.ItemSizeText\r\n *\r\n * Displays the file size in a human-readable format.\r\n */\r\nexport const ItemSizeText = forwardRef<\r\n    HTMLSpanElement,\r\n    ItemSizeTextProps & HTMLDreamyProps<\"span\">\r\n>(function FileUploadItemSizeText(props, ref) {\r\n    const { file, children, ...rest } = props;\r\n    const ctx = useFileUploadContext();\r\n    const sizeText = useMemo(() => formatFileSize(file.size, ctx.locale), [file.size, ctx.locale]);\r\n\r\n    return (\r\n        <StyledItemSizeText\r\n            ref={ref}\r\n            {...rest}\r\n        >\r\n            {children || sizeText}\r\n        </StyledItemSizeText>\r\n    );\r\n});\r\n\r\n// ─── ItemDeleteTrigger ───────────────────────────────────────────────────────\r\n\r\ninterface ItemDeleteTriggerProps {\r\n    file: File;\r\n    children?: React.ReactNode;\r\n}\r\n\r\nconst StyledItemDeleteTrigger = withContext(dreamy.button, \"itemDeleteTrigger\");\r\n\r\n/**\r\n * FileUpload.ItemDeleteTrigger\r\n *\r\n * A button to remove a specific file from the accepted list.\r\n */\r\nexport const ItemDeleteTrigger = forwardRef<\r\n    HTMLButtonElement,\r\n    ItemDeleteTriggerProps & HTMLDreamyProps<\"button\">\r\n>(function FileUploadItemDeleteTrigger(props, ref) {\r\n    const { file, children, ...rest } = props;\r\n    const ctx = useFileUploadContext();\r\n\r\n    return (\r\n        <StyledItemDeleteTrigger\r\n            aria-label={`Remove ${file.name}`}\r\n            onClick={() => ctx.removeFile(file)}\r\n            ref={ref}\r\n            type=\"button\"\r\n            {...rest}\r\n        >\r\n            {children || <DefaultCloseIcon />}\r\n        </StyledItemDeleteTrigger>\r\n    );\r\n});\r\n\r\n// ─── ClearTrigger ────────────────────────────────────────────────────────────\r\n\r\nconst StyledClearTrigger = withContext(dreamy.button, \"itemDeleteTrigger\");\r\n\r\n/**\r\n * FileUpload.ClearTrigger\r\n *\r\n * A button to clear all accepted files.\r\n */\r\nexport const ClearTrigger = forwardRef<HTMLButtonElement, HTMLDreamyProps<\"button\">>(\r\n    function FileUploadClearTrigger(props, ref) {\r\n        const { children, ...rest } = props;\r\n        const ctx = useFileUploadContext();\r\n\r\n        return (\r\n            <StyledClearTrigger\r\n                aria-label=\"Clear all files\"\r\n                onClick={() => ctx.clearFiles()}\r\n                ref={ref}\r\n                type=\"button\"\r\n                {...rest}\r\n            >\r\n                {children}\r\n            </StyledClearTrigger>\r\n        );\r\n    }\r\n);\r\n\r\n// ─── FileText ────────────────────────────────────────────────────────────────\r\n\r\ninterface FileTextProps {\r\n    fallback?: string;\r\n    children?: React.ReactNode;\r\n}\r\n\r\nconst StyledFileText = withContext(dreamy.span, \"fileText\");\r\n\r\n/**\r\n * FileUpload.FileText\r\n *\r\n * Displays the selected file name(s), or a fallback text when no files are selected.\r\n */\r\nexport const FileText = forwardRef<HTMLSpanElement, FileTextProps & HTMLDreamyProps<\"span\">>(\r\n    function FileUploadFileText(props, ref) {\r\n        const { fallback = \"Select file(s)\", children, ...rest } = props;\r\n        const ctx = useFileUploadContext();\r\n\r\n        const fileText = useMemo(() => {\r\n            const files = ctx.acceptedFiles;\r\n            if (files.length === 1) return files[0].name;\r\n            if (files.length > 1) return `${files.length} files`;\r\n            return fallback;\r\n        }, [ctx.acceptedFiles, fallback]);\r\n\r\n        const isPlaceholder = fileText === fallback;\r\n\r\n        return (\r\n            <StyledFileText\r\n                data-placeholder={isPlaceholder || undefined}\r\n                ref={ref}\r\n                {...rest}\r\n            >\r\n                {children || fileText}\r\n            </StyledFileText>\r\n        );\r\n    }\r\n);\r\n\r\n// ─── Context ─────────────────────────────────────────────────────────────────\r\n\r\n/**\r\n * FileUpload.Context\r\n *\r\n * Render prop component to access the file upload context.\r\n */\r\nexport function Context(props: { children: (ctx: UseFileUploadReturn) => React.ReactNode }) {\r\n    const ctx = useFileUploadContext();\r\n    return <>{props.children(ctx)}</>;\r\n}\r\n\r\n// ─── Shortcut Components ─────────────────────────────────────────────────────\r\n\r\ninterface ItemsBaseProps {\r\n    showSize?: boolean;\r\n    clearable?: boolean;\r\n}\r\n\r\n/**\r\n * FileUpload.Items\r\n *\r\n * Shortcut component that renders all accepted files as items.\r\n */\r\nexport function Items(props: ItemsBaseProps & HTMLDreamyProps<\"li\">) {\r\n    const { showSize, clearable, ...rest } = props;\r\n    const ctx = useFileUploadContext();\r\n\r\n    return (\r\n        <>\r\n            {ctx.acceptedFiles.map((file) => (\r\n                <Item\r\n                    file={file}\r\n                    key={file.name}\r\n                    {...rest}\r\n                >\r\n                    <ItemPreview />\r\n                    {showSize ? (\r\n                        <ItemContent>\r\n                            <ItemName file={file} />\r\n                            <ItemSizeText file={file} />\r\n                        </ItemContent>\r\n                    ) : (\r\n                        <ItemName\r\n                            file={file}\r\n                            flex=\"1\"\r\n                        />\r\n                    )}\r\n                    {clearable && <ItemDeleteTrigger file={file} />}\r\n                </Item>\r\n            ))}\r\n        </>\r\n    );\r\n}\r\n\r\ninterface ListProps extends ItemsBaseProps {}\r\n\r\n/**\r\n * FileUpload.List\r\n *\r\n * Shortcut that renders an item group with all accepted files.\r\n * Equivalent to `<FileUpload.ItemGroup><FileUpload.Items /></FileUpload.ItemGroup>`.\r\n */\r\nexport const List = forwardRef<HTMLUListElement, ListProps & HTMLDreamyProps<\"ul\">>(\r\n    function FileUploadList(props, ref) {\r\n        const { showSize, clearable, ...rest } = props;\r\n        const ctx = useFileUploadContext();\r\n\r\n        if (ctx.acceptedFiles.length === 0) return null;\r\n\r\n        return (\r\n            <ItemGroup\r\n                ref={ref}\r\n                {...rest}\r\n            >\r\n                <Items\r\n                    clearable={clearable}\r\n                    showSize={showSize}\r\n                />\r\n            </ItemGroup>\r\n        );\r\n    }\r\n);\r\n\r\n// ─── Default Icons ───────────────────────────────────────────────────────────\r\n\r\nfunction DefaultFileIcon() {\r\n    return (\r\n        <svg\r\n            aria-hidden=\"true\"\r\n            fill=\"none\"\r\n            height=\"18\"\r\n            stroke=\"currentColor\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth=\"2\"\r\n            viewBox=\"0 0 24 24\"\r\n            width=\"18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path d=\"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\" />\r\n            <path d=\"M14 2v4a2 2 0 0 0 2 2h4\" />\r\n        </svg>\r\n    );\r\n}\r\n\r\nfunction DefaultCloseIcon() {\r\n    return (\r\n        <svg\r\n            aria-hidden=\"true\"\r\n            fill=\"none\"\r\n            height=\"14\"\r\n            stroke=\"currentColor\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth=\"2\"\r\n            viewBox=\"0 0 24 24\"\r\n            width=\"14\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path d=\"M18 6 6 18\" />\r\n            <path d=\"m6 6 12 12\" />\r\n        </svg>\r\n    );\r\n}\r\n"
  },
  "component": "FileUpload",
  "hasRecipe": true,
  "hasPattern": false,
  "recipeIds": [
    "file-upload"
  ]
}